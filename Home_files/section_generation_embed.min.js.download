function add_element_to_section_template_iframe(e,t,n){e.find(t).length||jQuery(e).append(n)}function set_content_generation_status(){let e=window.parent.jQuery(".twbb-generate-section_description").val(),t=twbb_sg_embed.business_description;e||t?jQuery("body").hasClass("twbb-sg-with-description")||jQuery("body").addClass("twbb-sg-with-description"):jQuery("body").hasClass("twbb-sg-with-description")&&jQuery("body").removeClass("twbb-sg-with-description")}function twbb_insert_section(e,t="generate_content"){var n=jQuery("#twbb-sg-loading").html();if(jQuery("body").hasClass("twbb-some-section-in-process")||e.hasClass("twbb-the-sections-generation-in-process")||window.parent.jQuery(".twbb-sg-sidebar-navigated-contents-container").hasClass("twbb-some-section-in-process"))return;let s,o,i,a=window.parent.jQuery("#elementor-preview-iframe").contents(),r=-1,c="",b={};if(s=e.attr("id"),o=s.replace("twbb-sg-section-",""),c=window.parent.jQuery(".twbb-generate-section_description").val(),a.find(".elementor-add-section:not(#elementor-add-new-section)").length&&(r=a.find(".elementor-add-section:not(#elementor-add-new-section)").index()),"generate_content"===t&&!(o.indexOf("ai-generated-sections/ai_generated.json")>=0)){window.parent.twbb_generate_with_ai_navigation_tab_status("disable"),e.addClass("twbb-the-sections-generation-in-process"),jQuery("body").addClass("twbb-some-section-in-process"),window.parent.jQuery(".twbb-sg-sidebar-navigated-contents-container .twbb-sg-sidebar-navigated-content iframe").each((function(){jQuery(this).contents().find("body").addClass("twbb-some-section-in-process")})),window.parent.jQuery(".twbb-sg-sidebar-navigated-contents-container").addClass("twbb-some-section-in-process"),add_element_to_section_template_iframe(e,".twbb-sg-loading",n);let t=window.parent.collect_data_for_request(r);b={previous_Section_content:t.context.previous_section.section_title,next_Section_content:t.context.next_section.section_title}}o.indexOf("ai-generated-sections/ai_generated.json")>=0?(twbb_send_data_to_analytics(o,"already_generated_content"),window.parent.twbb_success_callback([],o,r)):(twbb_send_data_to_analytics(o,t),i={section_path:o,content_type:t,nearest_section_data:JSON.stringify(b),action:"twbb_get_section_generated_data_for_request",user_description:c,nonce:twbb_sg_embed.twbb_sg_nonce},window.parent.twbb_insert_section_premade(r,i))}function twbb_send_data_to_analytics(e,t){let n="";"generate_content"===t?n="Insert Section With Generated Content to the page":"dummy_content"===t?n="Insert Section With Dummy Content to the page":"already_generated_content"===t&&(n="Insert Generated Section to the page"),analyticsDataPush(n,"Section Generation",e)}jQuery(document).ready((function(){window.parent.jQuery(".twbb-sg-sidebar-navigated-contents-container").hasClass("twbb-some-section-in-process")&&jQuery("body").addClass("twbb-some-section-in-process");var e=jQuery("#twbb-sg-messages").html(),t=jQuery("#twbb-sg-overlay").html();jQuery(document).on("mouseenter",".twbb-sg-each-section",(function(){jQuery(this).addClass("twbb-sg-now-hovered"),add_element_to_section_template_iframe(jQuery(this),".twbb-sg-messages",e),add_element_to_section_template_iframe(jQuery(this),".twbb-sg-overlay",t),set_content_generation_status();var n=jQuery(this);setTimeout((function(){n.hasClass("twbb-sg-now-hovered")&&n.addClass("twbb-sg-hovered")}),2e3)})),jQuery(document).on("mouseleave",".twbb-sg-each-section",(function(){jQuery(this).removeClass("twbb-sg-now-hovered"),jQuery(this).removeClass("twbb-sg-hovered")})),jQuery(document).on("click",".elementor-add-twbb-section-generation-button",(function(){window.parent.jQuery(".twbb-sg-header-button-container").hasClass("selected")||(analyticsDataPush("Add Section","Section Generation","Inline"),window.parent.twbb_trigger_sections_button(window.parent.jQuery(".twbb-sg-header-button-container")))})),jQuery(document).on("click","body:not(.twbb-sg-with-description) .twbb-sg-each-section",(function(){twbb_insert_section(jQuery(this),"dummy_content")})),jQuery(document).on("click","body.twbb-sg-with-description .twbb-sg-add-with-generated-content,.twbb-sg-each-section[id*=ai-generated-sections]",(function(){twbb_insert_section(jQuery(this).closest(".twbb-sg-each-section"),"generate_content")})),jQuery(document).on("click","body.twbb-sg-with-description .twbb-sg-add-with-dummy-content",(function(){twbb_insert_section(jQuery(this).closest(".twbb-sg-each-section"),"dummy_content")})),jQuery(document).on("click",'.elementor-editor-element-edit[title="Edit Container"]',(function(){window.parent.twbb_animate_sidebar(0)}))}));